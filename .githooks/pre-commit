#!/bin/sh
# Git hook pour mettre Ã  jour automatiquement les statistiques du README avant chaque commit

echo "ğŸ”„ Mise Ã  jour automatique des statistiques du README..."

# VÃ©rifier si le serveur est accessible
if curl -sf http://localhost:3000/api/marketplace-stats > /dev/null 2>&1; then
    echo "âœ… Serveur accessible, mise Ã  jour des stats..."

    # ExÃ©cuter le script de mise Ã  jour
    npm run update-readme-stats

    # Ajouter le README modifiÃ© au commit
    git add README.md

    echo "âœ… README.md mis Ã  jour et ajoutÃ© au commit"
else
    echo "âš ï¸ Serveur non accessible - pas de mise Ã  jour des stats"
    echo "ğŸ’¡ DÃ©marrez le serveur avec 'npm run dev' pour des stats automatiques"
fi

echo "âœ… Pre-commit hook terminÃ©"